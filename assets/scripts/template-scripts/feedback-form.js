document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("js-open-feedback-form"),t=document.getElementById("js-close-feedback-form"),n=document.getElementById("js-feedback-form"),s=document.querySelector(".feedback-modal");if(e){e.addEventListener("click",(function(){const e=window.scrollY;n.classList.remove("is-hidden"),o(m),t.addEventListener("click",c),n.addEventListener("click",d),window.addEventListener("keydown",a),window.addEventListener("resize",i),document.documentElement.classList.add("modal__opened"),document.documentElement.style.top=`-${e}px`}));let m=window.innerHeight;const u=getComputedStyle(s),v=parseInt(u.height);function i(){m=window.innerHeight,o(m)}function o(e){v>e?s.classList.add("horizontal"):s.classList.remove("horizontal")}function c(){n.classList.add("is-hidden"),t.removeEventListener("click",c),n.removeEventListener("click",d),s.classList.remove("horizontal");const e=parseInt(document.documentElement.style.top||"0");document.documentElement.classList.remove("modal__opened"),window.scrollTo(0,-e)}function d(e){e.target===n&&c()}function a(e){"Escape"===e.key&&(e.preventDefault(),c(),window.removeEventListener("keydown",a))}}const l=document.querySelector(".feedback-select-js"),r=document.getElementById("case-js");if(l){const f=new Choices(l,{placeholderValue:"Виберіть програму...",searchEnabled:!1,allowHTML:!1,shouldSort:!1,position:"bottom",itemSelectText:""}),h=document.querySelector(".feedback-modal .choices__inner"),k=f.config.choices.length;f.passedElement.element.addEventListener("choice",(function(e){e.detail.choice.active?(h.classList.add("valid"),h.classList.remove("invalid")):(h.classList.remove("valid"),h.classList.add("invalid")),e.detail.choice.id===k?r.classList.add("shown"):r.classList.remove("shown")}),!1)}e&&jQuery(document).ready((function(e){const t=e(".input-name")[0],n=e(".input-email")[0],s=e(".input-case")[0],i=e(".input-review")[0];function o(e){const t=e.target,n=t.value.trim();let s,i;switch(t.getAttribute("name")){case"title":s=/^[^\d]+$/,i=s.test(n);break;case"email":s=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,i=s.test(n);break;case"case":case"description":i=n.length>=1}i?(t.classList.add("valid"),t.classList.remove("invalid")):(t.classList.add("invalid"),t.classList.remove("valid"))}t.addEventListener("keyup",o),n.addEventListener("keyup",o),s.addEventListener("keyup",o),i.addEventListener("keyup",o),e("#new_post").submit((function(c){c.preventDefault();var d,a=e(this),l=e(".feedback-notification-js"),r=e(".close-notification-btn"),m=function(e){"Escape"===e.key&&(e.preventDefault(),v())},u=function(t){e(t.target).is(l)&&v()};function v(){const t=e("html").css("top");clearTimeout(d),l.addClass("is-hidden"),l.off("click",u),e("html").removeClass("modal__opened"),window.scrollTo(0,-1*parseInt(t||"0")),e(window).off("keydown",m)}const f=[t,n,i];e(".feedback-case")[0].classList.contains("shown")&&f.push(s);let h=!0;f.forEach((t=>{o({target:t}),t.value.trim()&&!t.classList.contains("invalid")||(t.classList.add("invalid"),e(".feedback-alert").removeClass("hidden"),h=!1)}));const k=e(".feedback-modal .choices__inner")[0];e(".feedback-modal .choices__inner .choices__item")[0].classList.contains("choices__placeholder")&&(k.classList.add("invalid"),e(".feedback-alert").removeClass("hidden"),h=!1),h&&e.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),success:function(t){t.success?(a.trigger("reset"),e(".feedback-alert").addClass("hidden"),e(".feedback-backdrop").addClass("is-hidden"),setTimeout((function(){e(".feedback-backdrop").addClass("is-hidden"),l.removeClass("is-hidden"),e(window).on("keydown",m),l.on("click",u),d=setTimeout(v,5e3),r.on("click",v)}))):(e(".feedback-alert").removeClass("hidden"),console.log("Error: "+t.data))},error:function(e,t,n){console.log("Error: "+n)}})}))}))}));