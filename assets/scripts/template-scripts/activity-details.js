const openActivityFormButtons=document.querySelectorAll(".js-open-activity-form"),activityBackdrop=document.getElementById("js-activity-form"),activityModalEl=document.querySelector(".activity-modal");let screenHeight=window.innerHeight;const computedStyle=getComputedStyle(activityModalEl);let containerHeight=parseInt(computedStyle.height);const theme_uri=uri_object.theme_directory_uri,hide_btn=uri_object.hide_btn,read_btn=uri_object.read_btn;function lookForSizeChanges(){screenHeight=window.innerHeight,screenOrientation(screenHeight)}function screenOrientation(e){containerHeight>e?activityModalEl.classList.add("horizontal"):activityModalEl.classList.remove("horizontal")}function showModal(){const e=window.scrollY;activityBackdrop.classList.remove("is-hidden"),document.documentElement.classList.add("modal__opened"),screenOrientation(screenHeight),window.addEventListener("resize",lookForSizeChanges),document.documentElement.style.scrollBehavior="auto",activityBackdrop.addEventListener("mousedown",closeByBgdClick),window.addEventListener("keydown",closeByPressEscape),document.documentElement.style.top=`-${e}px`}function hideModal(){activityBackdrop.classList.add("is-hidden"),activityBackdrop.removeEventListener("mousedown",closeByBgdClick);const e=parseInt(document.documentElement.style.top||"0");document.documentElement.classList.remove("modal__opened"),activityModalEl.classList.remove("horizontal"),window.scrollTo(0,-e),document.documentElement.style.scrollBehavior="smooth"}function closeByBgdClick(e){e.target===activityBackdrop&&hideModal()}function closeByPressEscape(e){"Escape"===e.key&&(e.preventDefault(),hideModal(),window.removeEventListener("keydown",closeByPressEscape))}function updateModalHeight(){const e=activityModalEl.scrollHeight;e!==containerHeight&&(containerHeight=e,screenOrientation(screenHeight))}document.addEventListener("click",(e=>{const t=e.target;if("activity__modal--detais-open"===t.className){const e=t.nextElementSibling,i=t.previousElementSibling;e.classList.contains("hidden")?(t.innerHTML=`${hide_btn}\n        <span class="activity__modal--detais--icon active">\n        <svg>\n          <use href="${theme_uri}/assets/images/sprite.svg#icon-small_arrow"></use></svg></span>`,e.classList.remove("hidden"),i.classList.add("hidden")):(t.innerHTML=`${read_btn}\n        <span class="activity__modal--detais--icon">\n        <svg>\n          <use href="${theme_uri}/assets/images/sprite.svg#icon-small_arrow"></use>\n        </svg>\n      </span>`,e.classList.add("hidden"),i.classList.remove("hidden"));let n=parseInt(getComputedStyle(activityModalEl).height);screenHeight<n?(activityModalEl.style.transition="none",activityModalEl.classList.add("horizontal")):(activityModalEl.classList.remove("horizontal"),activityModalEl.style.transition="$transition-function")}})),jQuery(document).ready((function(e){openActivityFormButtons&&openActivityFormButtons.forEach((t=>{t.addEventListener("click",(function(i){i.preventDefault();const n=t.dataset.postId;function o(){e(t).next(".button__loader").show()}function s(){e(t).next(".button__loader").hide()}function a(t){var i={action:"get_post_activity",nonce:activity.nonce,postId:t};e.ajax({url:activity.ajaxUrl,type:"post",data:i,beforeSend:o,success:function(t){s(),e(".activity-modal").html(t.html),showModal(),updateModalHeight();document.getElementById("js-close-activity-form").addEventListener("click",hideModal)},error:function(e,t,i){s(),console.error("Request failed: "+i)}})}openActivityFormButtons.forEach((e=>{e.removeEventListener("click",a)})),a(n)}))}))}));