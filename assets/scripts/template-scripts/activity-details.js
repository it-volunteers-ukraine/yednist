const openActivityFormButtons=document.querySelectorAll(".js-open-activity-form"),activityBackdrop=document.getElementById("js-activity-form"),activityModalEl=document.querySelector(".activity-modal");let screenHeight=window.innerHeight;const computedStyle=getComputedStyle(activityModalEl);let containerHeight=parseInt(computedStyle.height);function lookForSizeChanges(){screenHeight=window.innerHeight,screenOrientation(screenHeight)}function screenOrientation(e){containerHeight>e?activityModalEl.classList.add("horizontal"):activityModalEl.classList.remove("horizontal")}function showModal(){const e=window.scrollY;activityBackdrop.classList.remove("is-hidden"),document.documentElement.classList.add("modal__opened"),screenOrientation(screenHeight),window.addEventListener("resize",lookForSizeChanges),document.documentElement.style.scrollBehavior="auto",activityBackdrop.addEventListener("mousedown",closeByBgdClick),window.addEventListener("keydown",closeByPressEscape),document.documentElement.style.top=`-${e}px`}function hideModal(){activityBackdrop.classList.add("is-hidden"),activityBackdrop.removeEventListener("mousedown",closeByBgdClick);const e=parseInt(document.documentElement.style.top||"0");document.documentElement.classList.remove("modal__opened"),activityModalEl.classList.remove("horizontal"),window.scrollTo(0,-e),document.documentElement.style.scrollBehavior="smooth"}function closeByBgdClick(e){e.target===activityBackdrop&&hideModal()}function closeByPressEscape(e){"Escape"===e.key&&(e.preventDefault(),hideModal(),window.removeEventListener("keydown",closeByPressEscape))}function updateModalHeight(){const e=activityModalEl.scrollHeight;e!==containerHeight&&(containerHeight=e,screenOrientation(screenHeight))}jQuery(document).ready((function(e){openActivityFormButtons&&openActivityFormButtons.forEach((t=>{t.addEventListener("click",(function(o){o.preventDefault();const n=t.dataset.postId;function i(){e(t).next(".button__loader").show()}function c(){e(t).next(".button__loader").hide()}function a(t){var o={action:"get_post_activity",nonce:activity.nonce,postId:t};e.ajax({url:activity.ajaxUrl,type:"post",data:o,beforeSend:i,success:function(t){c(),e(".activity-modal").html(t.html),showModal(),updateModalHeight();document.getElementById("js-close-activity-form").addEventListener("click",hideModal)},error:function(e,t,o){c(),console.error("Request failed: "+o)}})}openActivityFormButtons.forEach((e=>{e.removeEventListener("click",a)})),a(n)}))}))}));