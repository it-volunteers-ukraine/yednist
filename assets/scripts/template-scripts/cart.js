document.addEventListener("DOMContentLoaded",(function(){document.addEventListener("click",(function(e){if(e.target.classList.contains("plus")||e.target.classList.contains("minus")){const t=e.target,o=t.closest(".quantity-wrapper").querySelector(".qty"),c=parseFloat(o.value),a=parseFloat(o.getAttribute("max")),r=parseFloat(o.getAttribute("min")),n=parseFloat(o.getAttribute("step"));c&&!isNaN(c)||(c=0),document.body.classList.add("woocommerce-processing"),document.querySelector("tbody").classList.add("processing"),document.querySelector("tbody").style.opacity="0.5";const s=document.createElement("div");s.classList.add("blockUI","blockOverlay"),document.querySelector("tbody").appendChild(s),t.classList.contains("plus")?o.value=a&&c>=a?a:c+n:t.classList.contains("minus")&&(r&&c<=r?o.value=r:c>0&&(o.value=c-n)),o.dispatchEvent(new Event("change"));const d=t.closest("tr").querySelector("[data-product_id]").getAttribute("data-product_id"),l=new FormData;l.append("action","update_cart_item_quantity"),l.append("product_id",d),l.append("quantity",o.value),fetch(wc_cart_params.ajax_url,{method:"POST",body:l}).then((e=>e.json())).then((e=>{document.querySelector(".woocommerce-cart-form").innerHTML=e.fragments[".woocommerce-cart-form"],document.querySelector(".cart-collaterals").innerHTML=e.fragments[".cart-totals"],document.querySelector("body").dispatchEvent(new Event("wc_cart_updated"))})).finally((()=>{document.body.classList.remove("woocommerce-processing"),document.querySelector("tbody").style.opacity="1",document.querySelector("tbody").classList.remove("processing");var e=document.querySelector(".blockUI.blockOverlay");e&&e.remove()})).catch((e=>console.error("Ошибка:",e)))}}))}));