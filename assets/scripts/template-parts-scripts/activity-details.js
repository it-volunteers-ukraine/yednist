const openActivityFormButtons=document.querySelectorAll(".js-open-activity-form"),activityBackdrop=document.getElementById("js-activity-form"),activityModalEl=document.querySelector(".activity-modal");let screenHeight=window.innerHeight;const computedStyle=getComputedStyle(activityModalEl);let containerHeight=parseInt(computedStyle.height);const theme_uri=uri_object.theme_directory_uri,hide_btn=uri_object.hide_btn,read_btn=uri_object.read_btn;function lookForSizeChanges(){screenHeight=window.innerHeight,screenOrientation(screenHeight)}function screenOrientation(t){containerHeight>t?activityModalEl.classList.add("horizontal"):activityModalEl.classList.remove("horizontal")}function showModal(){const t=window.scrollY;activityBackdrop.classList.remove("is-hidden"),document.documentElement.classList.add("modal__opened"),screenOrientation(screenHeight),window.addEventListener("resize",lookForSizeChanges),activityBackdrop.addEventListener("mousedown",closeByBgdClickActivity),window.addEventListener("keydown",closeByPressEscape),document.documentElement.style.top=`-${t}px`}function hideModal(){activityBackdrop.classList.add("is-hidden"),activityBackdrop.removeEventListener("mousedown",closeByBgdClickActivity);const t=parseInt(document.documentElement.style.top||"0");document.documentElement.classList.remove("modal__opened"),activityModalEl.classList.remove("horizontal"),window.scrollTo(0,-t)}function closeByBgdClickActivity(t){t.target===activityBackdrop&&hideModal()}function closeByPressEscape(t){"Escape"===t.key&&(t.preventDefault(),hideModal(),window.removeEventListener("keydown",closeByPressEscape))}function updateModalHeight(){const t=activityModalEl.scrollHeight;t!==containerHeight&&(containerHeight=t,screenOrientation(screenHeight))}document.addEventListener("click",(t=>{const e=t.target;if("activity__modal--detais-open"===e.className){const t=e.nextElementSibling,i=e.previousElementSibling;t.classList.contains("hidden")?(e.innerHTML=`${hide_btn}\n        <span class="activity__modal--detais--icon active">\n        <svg>\n          <use href="${theme_uri}/assets/images/sprite.svg#icon-small_arrow"></use></svg></span>`,t.classList.remove("hidden"),i.classList.add("hidden")):(e.innerHTML=`${read_btn}\n        <span class="activity__modal--detais--icon">\n        <svg>\n          <use href="${theme_uri}/assets/images/sprite.svg#icon-small_arrow"></use>\n        </svg>\n      </span>`,t.classList.add("hidden"),i.classList.remove("hidden"));let n=parseInt(getComputedStyle(activityModalEl).height);screenHeight<n?(activityModalEl.style.transition="none",activityModalEl.classList.add("horizontal")):(activityModalEl.classList.remove("horizontal"),activityModalEl.style.transition="$transition-function")}})),jQuery(document).ready((function(t){openActivityFormButtons&&openActivityFormButtons.forEach((e=>{e.addEventListener("click",(function(i){i.preventDefault();const n=e.dataset.postId;function o(){t(e).next(".button__loader").show()}function s(){t(e).next(".button__loader").hide()}function a(e){var i={action:"get_post_activity",nonce:activity.nonce,postId:e};t.ajax({url:activity.ajaxUrl,type:"post",data:i,beforeSend:o,success:function(e){s(),t(".activity-modal").html(e.html),showModal(),updateModalHeight();document.getElementById("js-close-activity-form").addEventListener("click",hideModal)},error:function(t,e,i){s(),console.error("Request failed: "+i)}})}openActivityFormButtons.forEach((t=>{t.removeEventListener("click",a)})),a(n)}))}))}));